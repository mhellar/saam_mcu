<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>SI TBMA: Microcontroller Workshop: Day 2</title>
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
    <link rel="stylesheet" href="css/reveal.css">
    <link rel="stylesheet" href="css/theme/black.css" id="theme">
    <!-- Code syntax highlighting -->
    <link rel="stylesheet" href="lib/css/zenburn.css">
    <!-- Printing and PDF exports -->
    <script>
        var link = document.createElement('link');
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = window.location.search.match(/print-pdf/gi) ? 'css/print/pdf.css' : 'css/print/paper.css';
        document.getElementsByTagName('head')[0].appendChild(link);
    </script>
    <!--[if lt IE 9]>
        <script src="lib/js/html5shiv.js"></script>
        <![endif]-->
</head>

<body>
    <div class="reveal">
        <!-- Any section element inside of this container is displayed as a slide -->
        <div class="slides">
            <section data-background="img/background.png">
                <figure>
                    <h2 class="intro">SI TBMA: Microcontroller Workshop: Day 2</h2 class="intro">
                    <h2 class="intro">SI TBMA: Microcontroller Workshop: Day 2</h2 class="intro">
                    <h2 class="intro">SI TBMA: Microcontroller Workshop: Day 2</h2 class="intro">
                    <h2 class="intro">SI TBMA: Microcontroller Workshop: Day 2</h2 class="intro">
                </figure>
            </section>

            <section data-background="img/background.png" data-background-transition="zoom">
                <p><b>Slides are here: <br>https://mhellar.github.io/saam_mcu/day1</b></p>
                <br>
                <p><b><br><a href="https://bit.ly/2oMdfqU">Grab
                            the
                            code here: https://bit.ly/2oMdfqU
                        </a></b></p>
            </section>

            <section>
                <ul>
                    <h3>Topics for Today:</h3>
                    <li class="fragment">Warm up: getting to a known good state</li>
                    <li class="fragment">Soldering exercise</li>
                    <li class="fragment">Introduction to addressable LED's</li>
                    <li class="fragment">Programming exercise: Writing custom functions</li>
                    <li class="fragment">Sensor lecture</li>
                    <li class="fragment">Case study: Breathing Machine, Lynn Hershman Leeson</li>
                    <li class="fragment">Detecting proximity with the HC-04 ultrasonic rangefinder</li>
                    <li class="fragment">Introduction to the Johnny Five API for Internet-connected projects</li>
                    <li class="fragment">Programming exercise: Build a lamp connected to the DC Metro(WMATA) API</li>
                </ul>
            </section>
            <section>
                <h2>Controlling a Servo</h2>
                <img src="img/servo.png" height="500">
                <a href="#" class="navigate-down">
                </a>
            </section>
            <section>
                A Servo is a small device that has an output shaft. This shaft can be positioned to specific angular
                positions by sending the servo a coded signal. As long as the coded signal exists on the input line,
                the servo will maintain the angular position of the shaft. As the coded signal changes, the angular
                position of the shaft changes. In practice, servos are used in radio controlled airplanes to position
                control surfaces like the elevators and rudders. They are also used in radio controlled cars, puppets,
                and of course, robots.
            </section>
            <section data-background="img/72-points-mesh.svg" data-background-repeat="repeat" data-background-size="100px"
                data-background-transition="zoom">
                <h2>Servo_Sweep.ino</h2>
                <pre><code>
    #include <Servo.h>
    Servo myservo; // create servo object to control a servo
    // a maximum of eight servo objects can be created
    int pos = 0; // variable to store the servo position
    
    void setup() {
    myservo.attach(9); // attaches the servo on pin 9 to the servo object }
    
    void loop() {
    for(pos = 0; pos < 180; pos += 1) // goes from 0 degrees to 180 degrees
    }
    { myservo.write(pos); delay(15);
    // in steps of 1 degree
    // tell servo to go to position in variable 'pos'
    // waits 15ms for the servo to reach the position
    }
    for(pos = 180; pos>=1; pos-=1) // goes from 180 degrees to 0 degrees 
    {
    myservo.write(pos); // tell servo to go to position in variable 'pos'
    delay(15); // waits 15ms for the servo to reach the position 
    }
    </code></pre>
            </section>
            <section>
                <h3>Servo With Potentiometer</h3>
                <img src="img/servo_w_pot.png" height="600">
            </section>
            <section>
                <h3 class="intro">Upload SERVO_KNOB.INO</h3>
            </section>
            <section>
                <p>Soldering</p>
                <img src="img/soldering.jpg">
            </section>

            <section>
                <iframe width="560" height="315" src="https://www.youtube.com/embed/f95i88OSWB4" frameborder="0"
                    allowfullscreen></iframe>
            </section>

            <section>
                <p>Soldering</p>
                <img src="img/lcd_header.jpeg" height="200">
                <img src="img/ws_header.jpeg" height="200">
            </section>


            <section>
                <img src="img/lcd2.jpg"><br>
            </section>
            <section>
                <img src="img/header.jpg"><br>
            </section>
            <section>
                <img src="img/banzi.jpg"><br> "You don't need anyone's permission to create something great"
            </section>

            <section>
                <h3>Introduction to Addressable LEDS</h3>
                <img src="img/wsring.png" height="200">
                <img src="img/neostrip.png">
                <img src="img/ws2811.png">
            </section>
            <section>
                <h3>Basic LEDS Need a lot of Wiring</h3>
                <img src="img/led.png" height="300">
            </section>
            <section>
                <h3>Addressable LEDs provide circuitry to communicate serially</h3>
                <img src="img/WS2812_c.jpg" height="300">
            </section>
            <section>
                <h3>Each LED has a chip to receive, decode, drive LED’s and propagate data</h3>
                <img src="img/rgb-smd-led-with-wit-integrated-ws2812b-chip-type.jpg" height="300">
            </section>
            <section>
                <h3>They are chainable, fairly cheap and have their own resistors etc..</h3>
                <img src="img/wall.jpg" height="400">
                <h3>You can drive 10000's from 1 microcontroller</h3>
            </section>
            <section>
                <p>Adafruit has branded these Neopixels</p>
                <img src="img/ada.png">
            </section>
            <section>
                <p>You can get them for half the price on Ebay as ws2812's</p>
                <img src="img/ebay.png">
            </section>
            <section>
                <h4>These have a 5v, GND and DIN pin</h4>
                <img src="img/ring_pins.jpeg" height="400">
                <h4>Connect 5v to 5v, GND to GND and DIN to Pin6</h4>
            </section>
            <section>
                <p>Import the NeoPixel Library</p>
                <img src="img/import_library.png">
            </section>
            <section>
                <p>Import the NeoPixel Library</p>
                <img src="img/neolib.png">
            </section>
            <section>
                <p>Let's try some examples and write our own code!</p>
            </section>
            <section>
                <p>FastLED</p>
                <a href="http://fastled.io/">Fast LED Library</a>
            </section>
            <section>
                <p>APA102</p>
                <a href="https://cpldcpu.wordpress.com/2014/08/27/apa102/">APA102 aka “Superled”</a>
            </section>


            <section data-background-image="img/lcd.png">
            </section>
            <section>
                To wire your LCD screen, connect the following pins:
                <br><br>
                <ul>
                    <li>LCD RS pin to digital pin 12</li>
                    <li>LCD Enable pin to digital pin 11</li>
                    <li>LCD D4 pin to digital pin 5</li>
                    <li>LCD D5 pin to digital pin 4</li>
                    <li>LCD D6 pin to digital pin 3</li>
                    <li>LCD D7 pin to digital pin 2</li><br> Additionally, wire a 10k pot to +5V and GND, with it's
                    wiper
                    (output) to LCD screens VO pin (pin3). A 220 ohm resistor is used to power the backlight of the
                    display,
                    usually on pin 15 and 16 of the LCD connector
            </section>
            <section>
                <img src="img/lcd.png"><br>
            </section>
            <section>
                Run HelloWorldLCD
            </section>
            <section>
                Run SerialDisplay - Open serial monitor and pass some data
            </section>
            <section>
                <a href="https://www.arduino.cc/en/Reference/LiquidCrystal">Arduino Liquid Crystal Display Library</a>
            </section>
            <section data-background-image="img/nodejs.png">
            </section>
            <!-- <section>
                <img src="img/v8.png" height="300"><img src="img/chrome.png" height="300">
                <br>
                <p>The V8 JavaScript Engine is an open source JavaScript engine in the Chrome browser</p>
            </section>
            <section>
                <br>
                <h3>V8 compiles JavaScript to native machine code before executing it, which runs very fast.</h3>
            </section>
            <section>
                <h3>
                    NODEJS IS ESSENTIALLY V8 minus the browser, WITH SOME ADDITIONS SO THAT YOU CAN USE IT TO WRITE
                    SERVERS.
                    <br>
                    <a href="https://nodejs.org/api/http.html">Node API</a>
                </h3>
            </section>

            <section data-background="https://media.giphy.com/media/q9DjlPe2xGKnS/giphy.gif">
                <h3>
                    I just want to make art!
                </h3>
                <a href="#" class="navigate-down">
                </a>
            </section>
            <section>
                <h3>
                    <a href="http://dashboard.sidlee.com/">Sid Lee Dashboard</a>
                </h3>
            </section>
            <section>
                <iframe src="https://player.vimeo.com/video/31952864?color=c9ff23" width="800" height="450" frameborder="0"
                    webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>
            </section>
            <section>
                <a href="https://wwwwwwwwwwwwwwwwwwwwww.bitnik.org/r/">Random Darknet Shopper</a>
            </section>

            <section>
                <h3>You can run node from the command line<br> Just type node</h3>
                <img src="img/noderepl.png" height="400">
                <a href="#" class="navigate-down">
                </a>
            </section>
            <section>
                <h3>A Node program in a file<br>
                    <h3>Contents of app.js</h3>
                    <pre><code class="hljs" data-trim contenteditable width>
/**
 * 01 - Getting Started
 * Declare a variable, perform some math, output the result
 */
var initialNumber = 0;
var finalNumber = initialNumber + 10;

console.log(finalNumber);
                    </code></pre>

            </section>
            <section>
                <h3>simple little programs</h3>
                <br>
                <p>cd code_node1/simple from the terminal</p><br>
                <p>and open in a text editor</p>
                <a href="#" class="navigate-down">
                </a>
            </section>
            <section>
                <h3>type 'node add.js'</h3>
                <pre><code class="hljs" data-trim contenteditable width>
/**
 * 01 - Getting Started
 * Declare a variable, perform some math, output the result
 */
var initialNumber = 0;
var finalNumber = initialNumber + 10;

console.log(finalNumber);
                    </code></pre>
            </section>

            <section>
                <h3>type 'node timer.js'</h3>
                <pre><code class="hljs" data-trim contenteditable width>
/*
 * intervals.js
 * Intervals and Timeouts in javascript
 */

//******************************************************************************//
/*
 * setInterval(callback, time) : repeats the callback function every *time* ms

setInterval(function() {
    console.log("Ping");
},1000);

//******************************************************************************//

                    </code></pre>
                <a href="https://nodejs.org/api/timers.html">Node timers API</a>
            </section>

            <section>
                <img src="img/computer_talk.jpg" height="500">
                <p class="fragment">with NodeJS</p>
                <a href="#" class="navigate-down">
                </a>
            </section>
            <section>
                <h3>Open a terminal</h3>
                <img src="img/say_cmd.png" height="250">
                <h3>Type 'say' + space + "something to say"</h3>
            </section>
            <section>
                <h3>type 'node speak.js'</h3>
                <pre><code class="hljs" data-trim contenteditable width>
//the child_process library let's us execute command line commands, https://nodejs.org/api/child_process.html
var exec = require('child_process').exec;
//This variable stores the command we want to execute, we are going to use the say command
var say = 'say ';

//let's make a function that speaks
function speak(whatosay){
    //speak the string
    exec(say + whatosay);
    //log it to the console
    console.log(whatosay)
}
// call the function
speak("I just do this");
 */
                </code></pre>
                <a href="https://nodejs.org/api/child_process.html">https://nodejs.org/api/child_process.html</a>
            </section>
            <section>
                <h3>type 'node speak.js'</h3>
                <pre><code class="hljs" data-trim contenteditable width>
//the child_process library let's us execute command line commands, https://nodejs.org/api/child_process.html
var exec = require('child_process').exec;
//This variable stores the command we want to execute, we are going to use the say command
var say = 'say ';

//let's make a function that speaks
function speak(whatosay){
    //speak the string
    exec(say + whatosay);
    //log it to the console
    console.log(whatosay)
}
// call the function
speak("I just do this");
 */
                </code></pre>
                <a href="https://nodejs.org/api/child_process.html">https://nodejs.org/api/child_process.html</a>
            </section>
            <section>
                A simple BART Program
            </section>
            <section>
                <ul>
                    <li>Make a new directory somehwere called BARTPredict.</li>
                    <li class="fragment">Open The terminal and CD into that directory</li>
                    <li class="fragment">Drag the folder on to you preferred text editor</li>
                </ul>
            </section>
            <section>
                <ul>
                    <li>In the Terminal type 'npm init'</li>
                    <li class="fragment">Answer the questions</li>
                    <li class="fragment">then type 'npm install bart --save</li>
                </ul>
            </section>
            <section>
                <h3>make a new file 'index.js'</h3>
                <pre><code class="hljs" data-trim contenteditable width>
var bart = require('bart').createClient({ "interval": 3000 });

bart.on('dbrk', function(estimates) {
    console.log(estimates);
});
                </code></pre>
                <a href="https://www.npmjs.com/package/bart">https://www.npmjs.com/package/bart</a>
            </section>
            <section>
                The Bart Module returned something called Javascript Object Notation(JSON)<br> We can easily examine
                that
                here:
                <a href="http://jsonviewer.stack.hu/">http://jsonviewer.stack.hu/</a>
            </section>

            <section>
                <h3>make a new file 'index.js'</h3>
                <pre><code class="hljs" data-trim contenteditable width>
var bart = require('bart').createClient({ "interval": 3000 });

bart.on('dbrk', function(estimates) {
    // console.log(estimates);
    console.log("next train is headed " + estimates[0].direction + " in " + estimates[0].minutes + " destination is " + estimates[0].destination);
});
                </code></pre>
                <a href="https://www.npmjs.com/package/bart">https://www.npmjs.com/package/bart</a>
            </section>
            <section data-background-image="img/johnny-five-fb.png">
            </section>

            <section>
                <a href="http://johnny-five.io/">http://johnny-five.io/</a>
            </section>

            <section>
                To use Johnny-Five we need to install Firmata on to our Arduino
                File->Examples->Firmata->StandardFirmata
                <br> Firmata is a generic protocol for communicating with microcontrollers from software on a host
                computer.
                It is intended to work with any host computer software package.
            </section>

            <section>
                <a href="http://johnny-five.io/api/lcd">http://johnny-five.io/api/lcd/</a>
            </section>
            <section>
                Lets try the LCD control example<br> CD into the j5_lcd folder from the terminal
            </section>
            <section>
                Lets try the LCD control example<br> CD into the j5_lcd folder from the terminal<br> type 'npm install'<br>
                run
                'node app.js'<br> run 'node app2.js'
            </section>
            <section>
                Lets try the LCD Bart example<br> CD into the j5_lcd_bart folder from the terminal<br> type 'npm
                install'
                <br> run 'node app.js'
            </section>
            <section>
                Lets try the LCD Weather example<br> CD into the j5_lcd_weather folder from the terminal<br> type 'npm
                install'
                <br> run 'node app.js'
            </section>

            <section>
                <p>The ESP8266</p>
            </section>
            <section data-background="img/nodemcu.png">
            </section>

            <section>
                <p>The ESP8266 is a low-cost Wi-Fi chip with full TCP/IP stack and MCU (Micro Controller Unit)
                    capability
                    produced by Shanghai-based Chinese manufacturer, Espressif Systems.</p>
            </section>
            <section>
                <p>The ESP8266 is a low-cost Wi-Fi chip with full TCP/IP stack and MCU (Micro Controller Unit)
                    capability
                    produced by Shanghai-based Chinese manufacturer, Espressif Systems.</p>
            </section>
            <section>
                <p>The NodeMCU is a mini Arduino with Wifi, that is $10.00!</p>
                <br>
            </section>
            <section>
                <p>
                    <a href="https://github.com/esp8266/Arduino">ESP8266 core for Arduino</a> </p>
            </section>
            <section>
                <p>
                    Getting Set up:
                    <br> - First install the USB driver <a href="https://www.silabs.com/products/mcu/Pages/USBtoUARTBridgeVCPDrivers.aspx">SiLabs
                        serial driver</a>
                </p>
            </section>
            <section>
                <p>
                    Getting Set up:
                    <br> - Next go to the Arduino Preferences
                    <br><img src="img/ard-pref.png" height="400">
                    <br> Enter <b>http://arduino.esp8266.com/stable/package_esp8266com_index.json</b> into Additional
                    Boards
                    Manager URLs
                </p>
            </section>
            <section>
                <p>
                    Getting Set up:
                    <br> - Next, use the Board manager to install the ESP8266 package.
                    <br><img src="img/brdmgr.png" height="400">
                </p>
            </section>
            <section>
                <img src="img/nodemcu_pins.png">
            </section>
            <section>
                <p>Connect an led</p>
                <br>
                <img src="img/mqled.png">
            </section>
            <section>
                <p>Upload Blink</p>
                <br>
            </section>
            <section>
                <p>Upload WiFiWebServer</p>
                <br>
            </section>
            <section>
                <p>Connect some neopixels</p>
                <br>
                <img src="img/espixel.png">
                <br>
            </section>

            <section>
                <br>
                <img src="img/mqttorg.png">
                <br>
            </section>
            <section>
                <br>
                <img src="img/mqtt-explanation.png">
                <br>
            </section>
            <section>
                <p>brew install mosquitto</p><br>
                <p>run mosquitto from terminal</p>

            </section>
            <section>
                <p>Open 2 terminals</p><br>
                <p>In the first type: mosquitto_sub -h 127.0.0.1 -t topic</p><br>
                <p>In the second type: mosquitto_pub -h 127.0.0.1 -t topic -m "message"</p><br>
            </section>

            <section>
                <p>Public MQTT Server</p><br>
                <p>In the first type: mosquitto_sub -h ec2-35-167-192-176.us-west-2.compute.amazonaws.com -t /test</p><br>
                <p>In the second type: mosquitto_pub -h ec2-35-167-192-176.us-west-2.compute.amazonaws.com -t /test -m
                    "message"
                </p><br>
            </section>

            <section>
                <p>Install Arduino MQTT Library</p><br>
                <p>Upload mqtt_neopixels</p><br>
                <p>mosquitto_pub -h ec2-35-167-192-176.us-west-2.compute.amazonaws.com -t /test -m "1"</p><br>
            </section>


            <section>
                <p><a href="http://www.blynk.cc/">Blynk</a></p>
            </section> -->

            <!--
            <section>
                <img src="BT_HC05_Annotated.jpg">
            </section>
            <section>
                <img src="basicbt.png">
            </section>
            <section>
                <img src="btjoystick.png">
            </section>-->
        </div>
    </div>
    <script src="lib/js/head.min.js"></script>
    <script src="js/reveal.js"></script>
    <script>
        // Full list of configuration options available at:
        // https://github.com/hakimel/reveal.js#configuration
        Reveal.initialize({
            controls: true,
            progress: true,
            history: true,
            center: true,

            transition: 'convex', // none/fade/slide/convex/concave/zoom

            // Optional reveal.js plugins
            dependencies: [{
                src: 'lib/js/classList.js',
                condition: function () {
                    return !document.body.classList;
                }
            }, {
                src: 'plugin/markdown/marked.js',
                condition: function () {
                    return !!document.querySelector('[data-markdown]');
                }
            }, {
                src: 'plugin/markdown/markdown.js',
                condition: function () {
                    return !!document.querySelector('[data-markdown]');
                }
            }, {
                src: 'plugin/highlight/highlight.js',
                async: true,
                condition: function () {
                    return !!document.querySelector('pre code');
                },
                callback: function () {
                    hljs.initHighlightingOnLoad();
                }
            }, {
                src: 'plugin/zoom-js/zoom.js',
                async: true
            }, {
                src: 'plugin/notes/notes.js',
                async: true
            }]
        });
    </script>
</body>

</html>